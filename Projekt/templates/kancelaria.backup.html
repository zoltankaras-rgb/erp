<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <title>KancelĂˇria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- fonts & icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <!-- hlavnĂ˝ ĹˇtĂ˝l pre kancelĂˇriu -->
  <link rel="stylesheet" href="/static/css/kancelaria.css" />
</head>
<body>
  <div id="app">
    <header class="app-header">
      <h1>Modul KancelĂˇria</h1>
      <button id="logout-btn" class="btn btn-danger">OdhlĂˇsiĹĄ</button>
    </header>

    <div class="layout">
      <aside class="sidebar">
        <nav>
          <a data-section="dashboard" class="active">Dashboard</a>
          <a data-section="stock">Sklad</a>
          <a data-section="planning">PlĂˇnovanie</a>
          <a data-section="erp">ERP Admin</a>
          <a data-section="b2b">B2B</a>
          <a data-section="b2c">B2C</a>
          <a data-section="haccp">HACCP</a>
          <a data-section="fleet">Flotila</a>
          <a data-section="hygiene">Hygiena</a>
          <a data-section="profitability">ZiskovosĹĄ</a>
          <a data-section="costs">NĂˇklady</a>
        </nav>
      </aside>

      <main class="content">
        <!-- Dashboard -->
        <section id="section-dashboard" class="section active">
          <h2>Dashboard</h2>
          <div id="dashboard-slot"><!-- tvoj existujĂşci dashboard JS --></div>
        </section>

        <!-- Sklad -->
        <section id="section-stock" class="section">
          <h2>Sklad</h2>

          <div class="row gap">
            <button id="stock-show-overview" class="btn">PrehÄľad skladu</button>
            <button id="stock-open-receive-meat"  class="btn btn-primary">PrĂ­jem MĂ¤so</button>
            <button id="stock-open-receive-other" class="btn btn-primary">PrĂ­jem Koreniny/Obaly/PomocnĂ˝ materiĂˇl</button>
            <button id="stock-open-reports" class="btn">Reporty prĂ­jmu</button>
            <button id="stock-open-writeoff" class="btn btn-danger">Odpis</button>
          </div>

          <!-- Reporty prĂ­jmu -->
          <div id="stock-reports-panel" class="card mt hidden">
            <h3>Reporty prĂ­jmu (vĂ˝robnĂ˝ sklad)</h3>
            <div class="row gap" style="flex-wrap:wrap;">
              <label>Rozsah
                <select id="rep-period">
                  <option value="week">PoslednĂ˝ch 7 dnĂ­</option>
                  <option value="month">Tento mesiac</option>
                  <option value="range">VlastnĂ©</option>
                </select>
              </label>
              <label>Od <input type="date" id="rep-from"></label>
              <label>Do <input type="date" id="rep-to"></label>
              <label>KategĂłrie
                <select id="rep-scope">
                  <option value="all">VĹˇetko</option>
                  <option value="meat">MĂ¤so</option>
                  <option value="other">Koreniny/Obaly/PomocnĂ˝</option>
                </select>
              </label>
              <button id="rep-run" class="btn">ZobraziĹĄ</button>
              <button id="rep-pdf" class="btn btn-primary">StiahnuĹĄ PDF</button>
            </div>

            <div class="table-wrap mt">
              <table>
                <thead>
                  <tr>
                    <th>KategĂłria</th>
                    <th>DodĂˇvateÄľ</th>
                    <th>Produkt</th>
                    <th class="num">MnoĹľstvo</th>
                    <th class="num">Priem. cena</th>
                    <th class="num">Hodnota (â‚¬)</th>
                  </tr>
                </thead>
                <tbody id="rep-tbody"></tbody>
                <tfoot>
                  <tr>
                    <td colspan="5" class="num"><strong>Celkom</strong></td>
                    <td id="rep-total" class="num"><strong>0.00</strong></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>

          <!-- Filtre (ak chceĹˇ, mĂ´Ĺľe zostaĹĄ skrytĂ©; sklad = 1 pouĹľĂ­vame fixne) -->
          <div id="stock-filters" class="row gap mt hidden">
            <label>VĂ˝robnĂ˝ sklad
              <select id="stock-warehouse"></select>
            </label>
            <label>KategĂłria
              <select id="stock-category"></select>
            </label>
            <button id="stock-refresh" class="btn">FiltrovaĹĄ</button>
          </div>

          <!-- PrehÄľad skladu (sedĂ­ so stock.js: Sklad, EAN, Produkt, KategĂłria, MnoĹľstvo, Priem. cena, Hodnota) -->
          <div id="stock-overview" class="card mt hidden">
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Sklad</th>
                    <th>EAN</th>
                    <th>Produkt</th>
                    <th>KategĂłria</th>
                    <th class="num">MnoĹľstvo</th>
                    <th class="num">Priem. cena</th>
                    <th class="num">Hodnota (â‚¬)</th>
                  </tr>
                </thead>
                <tbody id="stock-tbody"></tbody>
                <tfoot>
                  <tr>
                    <td colspan="6" class="num"><strong>Celkom</strong></td>
                    <td id="stock-total" class="num"><strong>0.00</strong></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>
        </section>

        <!-- PlĂˇnovanie -->
        <section id="section-planning" class="section">
          <h2>PlĂˇnovanie</h2>
        </section>

        <!-- ERP Admin -->
        <section id="section-erp" class="section">
          <h2>ERP Admin</h2>

          <div class="row gap">
            <button id="erp-tab-overview" class="btn">PrehÄľad katalĂłgu</button>
            <button id="erp-tab-addcat"  class="btn">PridaĹĄ predajnĂş kategĂłriu</button>
            <button id="erp-tab-addprod" class="btn btn-primary">PridaĹĄ produkt</button>
            <button id="erp-tab-recipes" class="btn">Recepty</button>
          </div>

          <!-- PrehÄľad katalĂłgu -->
          <div id="erp-panel-overview" class="card mt" style="display:none;">
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>EAN</th><th>NĂˇzov</th><th>DPH %</th><th>PredajnĂˇ kategĂłria</th><th>Jednotka</th><th>VyrĂˇbam?</th>
                  </tr>
                </thead>
                <tbody id="erp-overview-tbody"></tbody>
              </table>
            </div>
          </div>

          <!-- PridaĹĄ predajnĂş kategĂłriu -->
          <div id="erp-panel-addcat" class="card mt" style="display:none;">
            <h3>PridaĹĄ predajnĂş kategĂłriu</h3>
            <div class="row gap">
              <input id="erp-cat-name" placeholder="NĂˇzov kategĂłrie" />
              <button id="erp-cat-save" class="btn btn-primary">UloĹľiĹĄ</button>
            </div>
            <p id="erp-cat-msg"></p>
            <div id="erp-cat-list" class="mt"></div>
          </div>

          <!-- PridaĹĄ produkt -->
          <div id="erp-panel-addprod" class="card mt" style="display:none;">
            <h3>PridaĹĄ produkt do centrĂˇlneho katalĂłgu</h3>
            <div class="grid" style="display:grid;grid-template-columns:repeat(2,minmax(240px,1fr));gap:.5rem;">
              <label>EAN (voliteÄľnĂ©)<input id="erp-prod-ean"/></label>
              <label>NĂˇzov produktu<input id="erp-prod-name"/></label>
              <label>DPH
                <select id="erp-prod-vat">
                  <option value="5">5%</option>
                  <option value="10">10%</option>
                  <option value="19">19%</option>
                  <option value="20" selected>20%</option>
                  <option value="23">23%</option>
                </select>
              </label>
              <label>PredajnĂˇ kategĂłria<select id="erp-prod-sc"></select></label>
              <label>Jednotka
                <select id="erp-prod-unit">
                  <option value="kg">kg</option>
                  <option value="ks">ks</option>
                </select>
              </label>
              <label style="align-self:end;"><input type="checkbox" id="erp-prod-isprod" /> Ja vyrĂˇbam</label>
            </div>
            <div class="row gap mt" style="justify-content:flex-end;">
              <button id="erp-prod-save" class="btn btn-primary">UloĹľiĹĄ produkt</button>
            </div>
            <p id="erp-prod-msg"></p>
          </div>

          <!-- Recepty -->
          <div id="erp-panel-recipes" class="card mt" style="display:none;">
            <div class="row gap" style="flex-wrap:wrap;">
              <label>VĂ˝robok
                <select id="rcp-product"></select>
              </label>
              <button id="rcp-load" class="btn">NaÄŤĂ­taĹĄ recept</button>
            </div>

            <!-- Parametre vĂ˝roby -->
            <div class="card mt" id="rcp-meta">
              <h4>Parametre vĂ˝roby</h4>
              <div class="row gap" style="flex-wrap:wrap;">
                <label>Je vĂ˝robok?
                  <input type="checkbox" id="rcp-isprod">
                </label>
                <label>VĂ˝robnĂˇ kategĂłria
                  <select id="rcp-prodcat"></select>
                </label>
                <label>VĂ˝robnĂˇ jednotka
                  <select id="rcp-unit">
                    <option value="kg">kg</option>
                    <option value="ks">ks</option>
                  </select>
                </label>
                <label id="rcp-piece-weight-wrap" style="display:none;">HmotnosĹĄ kusu (g)
                  <input type="number" id="rcp-piece-weight" min="1" step="1" value="200">
                </label>

                <button id="rcp-meta-save" class="btn btn-primary">UloĹľiĹĄ parametre</button>
                <button id="rcp-prodcat-manage" class="btn">SprĂˇva vĂ˝robnĂ˝ch kategĂłriĂ­</button>
              </div>
              <p id="rcp-meta-msg"></p>
            </div>

            <!-- Editor receptu -->
            <div class="table-wrap mt">
              <table>
                <thead>
                  <tr><th>MateriĂˇl (surovina)</th><th class="num">MnoĹľstvo na 100 kg</th><th></th></tr>
                </thead>
                <tbody id="rcp-tbody"></tbody>
              </table>
            </div>
            <div class="row gap mt">
              <button id="rcp-add-row" class="btn">+ PridaĹĄ poloĹľku</button>
              <div style="flex:1"></div>
              <button id="rcp-save" class="btn btn-primary">UloĹľiĹĄ recept</button>
            </div>

            <hr class="mt">
            <h4>RĂ˝chly vĂ˝poÄŤet potreby zo skladu</h4>
            <div class="row gap">
              <label>PlĂˇnovanĂˇ dĂˇvka (kg)
                <input type="number" id="rcp-planned" step="0.1" value="100">
              </label>
              <button id="rcp-calc" class="btn">PrepoÄŤĂ­taĹĄ</button>
            </div>
            <div class="table-wrap mt">
              <table>
                <thead>
                  <tr><th>MateriĂˇl</th><th class="num">PotrebnĂ©</th><th class="num">Sklad (WH=1)</th><th>OK?</th></tr>
                </thead>
                <tbody id="rcp-calc-tbody"></tbody>
              </table>
            </div>

            <div class="row gap mt" style="justify-content:flex-end;">
              <!-- VĂ˝robu spĂşĹˇĹĄa neskĂ´r modul VĂ˝roba, tu nechĂˇme len kalkulĂˇciu -->
              <button id="rcp-start" class="btn btn-danger" disabled title="VĂ˝roba sa spĂşĹˇĹĄa v module VĂ˝roba">SpustiĹĄ vĂ˝robu (v module VĂ˝roba)</button>
            </div>
            <p id="rcp-msg"></p>
          </div>
        </section>

        <!-- ZvyĹˇnĂ© sekcie (placeholders) -->
        <section id="section-b2b" class="section"><h2>B2B</h2></section>
        <section id="section-b2c" class="section"><h2>B2C</h2></section>
        <section id="section-haccp" class="section"><h2>HACCP</h2></section>
        <section id="section-fleet" class="section"><h2>Flotila</h2></section>
        <section id="section-hygiene" class="section"><h2>Hygiena</h2></section>
        <section id="section-profitability" class="section"><h2>ZiskovosĹĄ</h2></section>
        <section id="section-costs" class="section"><h2>NĂˇklady</h2></section>
      </main>
    </div>
  </div>

  <!-- Modal root -->
  <div id="modal-root" class="modal-root hidden"></div>

  <!-- tvoje existujĂşce skripty -->
  <script src="/static/js/common.js"></script>
  <script src="/static/js/kancelaria.js"></script>

  <!-- modulovĂ© skripty (absolĂştne cesty) -->
  
  <script type="module" src="/static/js/ui/modal.js"></script>
  <script type="module" src="/static/js/kancelaria/index.js"></script>
  <script type="module" src="/static/js/kancelaria/stock.js"></script>
  <script type="module" src="/static/js/kancelaria_modules/erp_admin.js"></script>
</body>
</html>
